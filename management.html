<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garage Management Console (GMC)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>

    <style>
        /* Custom styles for tab navigation */
        .active-tab {
            @apply bg-indigo-700 text-white;
        }
        .tab-button {
            @apply p-3 text-sm font-medium transition duration-150 hover:bg-indigo-200 text-indigo-800 rounded-lg;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore-compat.js"></script>
    
    <section id="auth-section-management" class="flex items-center justify-center min-h-screen">
        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-sm">
            <h2 class="text-2xl font-bold mb-6 text-gray-800 text-center">GMC Login</h2>
            <div class="space-y-4">
                <input id="management-email" type="email" placeholder="Email" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                <input id="management-password" type="password" placeholder="Password" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                <p id="management-auth-message" class="text-sm text-red-500 text-center"></p>
                <button id="managementLoginBtn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition duration-150">Login</button>
            </div>
        </div>
    </section>

    <div id="management-dashboard" class="container mx-auto p-4 hidden">
        <header class="flex justify-between items-center py-4 border-b border-gray-200">
            <h1 class="text-3xl font-extrabold text-indigo-700">Garage Management Console (GMC)</h1>
            <button id="managementLogoutBtn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150 hidden">Logout</button>
        </header>

        <nav id="tab-nav" class="flex space-x-2 p-3 bg-white rounded-xl shadow-md mt-4">
            <button id="tab-finance" class="tab-button active-tab">Finance & Reports</button>
            <button id="tab-inventory" class="tab-button">Parts Inventory</button>
            <button id="tab-suppliers" class="tab-button">Suppliers & Contacts</button>
            <button id="tab-invoices" class="tab-button">Invoices & Receipts</button>
            <button id="tab-quotes" class="tab-button">Repair Quotes</button>
        </nav>

        <main class="mt-6">
            <div id="content-finance" class="tab-content">
                <h2 class="text-3xl font-bold text-gray-800 border-b pb-2 mb-6">Daily Financial Management</h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-1 space-y-6">
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Record Job Income/Expense</h3>
                            <form id="finance-job-form" class="space-y-3">
                                <select id="job-type" required class="w-full p-2 border rounded-lg">
                                    <option value="Service">Service</option>
                                    <option value="Repair">Repair</option>
                                    <option value="Diagnostics">Diagnostics</option>
                                </select>
                                <input id="job-plate" type="text" placeholder="Car Plate (Optional)" class="w-full p-2 border rounded-lg">
                                <input id="job-income" type="number" placeholder="Income Amount ($)" step="0.01" min="0" required class="w-full p-2 border rounded-lg">
                                <input id="job-expense" type="number" placeholder="Associated Expense ($)" step="0.01" min="0" value="0" class="w-full p-2 border rounded-lg">
                                <div id="job-profit-display" class="text-center font-bold text-lg text-gray-500">Profit: $0.00</div>
                                <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg">Record Job</button>
                            </form>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Record General Transaction</h3>
                            <form id="finance-general-form" class="space-y-3">
                                <select id="general-type" required class="w-full p-2 border rounded-lg">
                                    <option value="Stock Purchase">Stock Purchase (Expense)</option>
                                    <option value="Utility Bill">Utility Bill (Expense)</option>
                                    <option value="Rent">Rent (Expense)</option>
                                    <option value="Other Income">Other Income</option>
                                </select>
                                <input id="general-amount" type="number" placeholder="Amount ($)" step="0.01" min="0" required class="w-full p-2 border rounded-lg">
                                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-lg">Record Transaction</button>
                            </form>
                        </div>
                    </div>
                    <div class="lg:col-span-2 space-y-6">
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Today's Transactions</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Plate</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Income</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Expense</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Profit</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="daily-transactions-body" class="bg-white divide-y divide-gray-200">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Daily Summary</h3>
                            <div class="flex justify-around text-center">
                                <div><span class="text-sm text-gray-500">Income</span><p id="summary-income" class="text-2xl font-bold text-green-600">$0.00</p></div>
                                <div><span class="text-sm text-gray-500">Expense</span><p id="summary-expense" class="text-2xl font-bold text-red-600">$0.00</p></div>
                                <div><span class="text-sm text-gray-500">Net Profit</span><p id="summary-profit" class="text-2xl font-bold text-indigo-600">$0.00</p></div>
                            </div>
                            <button id="end-day-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 rounded-lg mt-4 disabled:opacity-50" disabled>End Day & Save P&L Report</button>
                        </div>
                    </div>
                </div>
                
                <div id="report-view-section" class="mt-6 bg-white p-6 rounded-xl shadow-lg hidden">
                    <h3 class="text-2xl font-semibold mb-4 text-indigo-700 border-b pb-2">Financial Reports & Trends</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <h4 class="font-medium mb-2">Monthly Net Profit Trend</h4>
                            <canvas id="pl-chart" class="w-full h-80"></canvas>
                        </div>
                        <div class="lg:col-span-1">
                            <h4 class="font-medium mb-2">Past Daily Reports</h4>
                            <div id="past-reports-list" class="space-y-2 max-h-96 overflow-y-auto">
                                <p class="text-gray-500">Click 'View Reports' to load...</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button id="view-reports-btn" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 rounded-lg mt-4">View Reports & Analytics</button>

            </div>

            <div id="content-inventory" class="tab-content hidden">
                 <h2 class="text-3xl font-bold text-gray-800 border-b pb-2 mb-6">Parts Inventory Management</h2>
                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                     <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-lg">
                         <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Add New Part to Stock</h3>
                         <form id="add-part-form" class="space-y-3">
                             <input id="part-name" type="text" placeholder="Part Name (e.g., Oil Filter)" required class="w-full p-2 border rounded-lg">
                             <input id="part-sku" type="text" placeholder="SKU/Reference (Optional)" class="w-full p-2 border rounded-lg">
                             <input id="part-quantity" type="number" placeholder="Initial Quantity" min="1" required class="w-full p-2 border rounded-lg">
                             <input id="part-supplier-price" type="number" placeholder="Supplier Price (Cost)" step="0.01" min="0" required class="w-full p-2 border rounded-lg">
                             <input id="part-selling-price" type="number" placeholder="Selling Price (RRP)" step="0.01" min="0" required class="w-full p-2 border rounded-lg">
                             <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg">Add Part</button>
                         </form>
                     </div>

                     <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                         <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Current Stock</h3>
                         <div class="overflow-x-auto">
                             <table class="min-w-full divide-y divide-gray-200">
                                 <thead class="bg-gray-50">
                                     <tr>
                                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Part Name (SKU)</th>
                                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Qty</th>
                                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cost</th>
                                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sell Price</th>
                                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                     </tr>
                                 </thead>
                                 <tbody id="parts-inventory-body" class="bg-white divide-y divide-gray-200">
                                 </tbody>
                             </table>
                         </div>
                     </div>
                     
                     <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-lg">
                         <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Record Part Sale</h3>
                         <form id="sell-part-form" class="space-y-3 flex flex-wrap items-end gap-3">
                             <div class="w-full md:w-5/12">
                                 <label for="part-sale-select" class="block text-sm font-medium text-gray-700">Select Part</label>
                                 <select id="part-sale-select" required class="w-full p-2 border rounded-lg">
                                     <option value="">Select Part to Sell</option>
                                 </select>
                             </div>
                             <div class="w-full md:w-2/12">
                                 <label for="part-sale-quantity" class="block text-sm font-medium text-gray-700">Quantity</label>
                                 <input id="part-sale-quantity" type="number" value="1" min="1" required class="w-full p-2 border rounded-lg text-center">
                             </div>
                             <div class="w-full md:w-3/12">
                                 <label for="part-sale-plate" class="block text-sm font-medium text-gray-700">Car Plate (Optional)</label>
                                 <input id="part-sale-plate" type="text" class="w-full p-2 border rounded-lg">
                             </div>
                             <div class="w-full md:w-2/12">
                                 <div class="text-center">
                                     <span class="text-sm font-medium text-gray-700">Profit:</span>
                                     <p id="part-sale-profit-display" class="font-bold text-xl text-gray-500">$0.00</p>
                                 </div>
                             </div>
                             <button id="commit-part-sale-btn" type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 rounded-lg disabled:opacity-50" disabled>Commit Sale & Record Profit</button>
                         </form>
                     </div>
                 </div>
            </div>

            <div id="content-suppliers" class="tab-content hidden">
                 <h2 class="text-3xl font-bold text-gray-800 border-b pb-2 mb-6">Supplier Management & Ordering</h2>
                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                     <div class="lg:col-span-1 space-y-6">
                         <div class="bg-white p-6 rounded-xl shadow-lg">
                             <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Add New Supplier</h3>
                             <form id="add-supplier-form" class="space-y-3">
                                 <input id="supplier-name" type="text" placeholder="Supplier Name" required class="w-full p-2 border rounded-lg">
                                 <select id="supplier-type" required class="w-full p-2 border rounded-lg">
                                     <option value="Parts">Parts</option>
                                     <option value="Tools">Tools</option>
                                     <option value="Services">Services</option>
                                     <option value="Other">Other</option>
                                 </select>
                                 <input id="supplier-contact" type="tel" placeholder="Contact Phone (WhatsApp)" required class="w-full p-2 border rounded-lg">
                                 <input id="supplier-location" type="text" placeholder="Location/Address" class="w-full p-2 border rounded-lg">
                                 <input id="supplier-owed" type="number" placeholder="Amount Owed ($0.00)" step="0.01" value="0" class="w-full p-2 border rounded-lg">
                                 <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg">Add Supplier</button>
                             </form>
                         </div>
                     </div>
                     
                     <div class="lg:col-span-2 space-y-6">
                         <div class="bg-white p-6 rounded-xl shadow-lg">
                             <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Current Suppliers</h3>
                             <div class="overflow-x-auto">
                                 <table class="min-w-full divide-y divide-gray-200">
                                     <thead class="bg-gray-50">
                                         <tr>
                                             <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                             <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                             <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                                             <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Owed</th>
                                             <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                         </tr>
                                     </thead>
                                     <tbody id="suppliers-table-body" class="bg-white divide-y divide-gray-200">
                                     </tbody>
                                 </table>
                             </div>
                         </div>
                     </div>

                     <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">WhatsApp Ordering Tool</h3>
                        <div class="flex flex-wrap items-end gap-4">
                            <div class="w-full md:w-3/12">
                                <label for="whatsapp-supplier-select" class="block text-sm font-medium text-gray-700">Select Supplier</label>
                                <select id="whatsapp-supplier-select" class="w-full p-2 border rounded-lg">
                                    <option value="">Select Supplier</option>
                                </select>
                            </div>
                            <div class="w-full md:w-6/12">
                                <label for="supplies-list" class="block text-sm font-medium text-gray-700">List of Supplies (One item per line)</label>
                                <textarea id="supplies-list" rows="3" placeholder="1x Brake Pads (Front, Model XYZ)&#10;1L Engine Oil (5W-30)&#10;2x Spark Plugs" class="w-full p-2 border rounded-lg"></textarea>
                            </div>
                            <div class="w-full md:w-2/12">
                                <button id="order-whatsapp-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg disabled:opacity-50" disabled>
                                    <i class="fab fa-whatsapp mr-2"></i>Send Order
                                </button>
                            </div>
                        </div>
                    </div>
                 </div>
            </div>

            <div id="content-invoices" class="tab-content hidden">
                <h2 class="text-3xl font-bold text-gray-800 border-b pb-2 mb-6">Invoices & Receipts Generation</h2>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Generate New Invoice / Receipt</h3>
                        <form id="invoice-creation-form" class="space-y-3">
                            <input id="invoice-client-name" type="text" placeholder="Client Name" required class="w-full p-2 border rounded-lg" />
                            <input id="invoice-client-phone" type="tel" placeholder="Client Phone (+CCCXXXX)" required class="w-full p-2 border rounded-lg" />
                            <input id="invoice-car-plate" type="text" placeholder="Vehicle Plate" required class="w-full p-2 border rounded-lg" />

                            <h4 class="font-medium text-gray-700 mt-4">Items (Labor/Parts)</h4>
                            <div id="invoice-items-container" class="space-y-2">
                                <div class="flex space-x-2 item-row mb-2">
                                    <input type="text" placeholder="Description" class="p-2 border rounded-lg w-5/12 item-desc" required/>
                                    <input type="number" value="1" min="1" placeholder="Qty" class="p-2 border rounded-lg w-2/12 item-quantity text-center" oninput="calculateTotal('invoice')" required/>
                                    <input type="number" placeholder="Amount ($)" class="p-2 border rounded-lg w-4/12 item-amount text-right" step="0.01" min="0" required/>
                                    <button type="button" class="w-1/12 text-red-500 hover:text-red-700 font-bold flex justify-center items-center" onclick="this.closest('.item-row').remove(); calculateTotal('invoice')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <button type="button" onclick="addInvoiceItemRow()" class="w-full bg-indigo-100 text-indigo-700 hover:bg-indigo-200 font-bold py-2 rounded-lg transition duration-150 mb-4"><i class="fas fa-plus mr-2"></i>Add Item/Labor</button>
                            
                            <div class="pt-4 border-t mt-4 flex justify-between items-center">
                                <span class="text-xl font-bold text-gray-700">TOTAL AMOUNT:</span>
                                <span id="invoice-total-display" class="text-2xl font-extrabold text-indigo-600">$0.00</span>
                            </div>
                            
                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition duration-150"><i class="fas fa-file-export mr-2"></i>Generate & Commit Invoice</button>
                        </form>
                    </div> 
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Past Invoices & Receipts</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Invoice No.</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Client / Plate</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount ($)</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="invoices-table-body" class="bg-white divide-y divide-gray-200">
                                    </tbody>
                            </table>
                        </div>
                    </div>
                    </div>
            </div>

            <div id="content-quotes" class="tab-content hidden">
                <h2 class="text-3xl font-bold text-gray-800 border-b pb-2 mb-6">Repair Quotes Generation</h2>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Create New Quote</h3>
                        <form id="quote-creation-form" class="space-y-3">
                            <input id="quote-client-name" type="text" placeholder="Client Name" required class="w-full p-2 border rounded-lg" />
                            <input id="quote-client-phone" type="tel" placeholder="Client Phone (+CCCXXXX)" required class="w-full p-2 border rounded-lg" />
                            <input id="quote-car-plate" type="text" placeholder="Vehicle Plate" required class="w-full p-2 border rounded-lg" />
                            <input id="quote-car-make" type="text" placeholder="Vehicle Make/Model" class="w-full p-2 border rounded-lg" />

                            <h4 class="font-medium text-gray-700 mt-4">Estimated Items (Parts/Labor)</h4>
                            <div id="quote-items-container" class="space-y-2">
                                <div class="flex space-x-2 quote-item-row mb-2">
                                    <input type="text" placeholder="Description" class="p-2 border rounded-lg w-5/12 quote-item-desc" required/>
                                    <input type="number" value="1" min="1" placeholder="Qty" class="p-2 border rounded-lg w-2/12 quote-item-quantity text-center" oninput="calculateTotal('quote')" required/>
                                    <input type="number" placeholder="Cost ($)" class="p-2 border rounded-lg w-4/12 quote-item-amount text-right" step="0.01" min="0" required/>
                                    <button type="button" class="w-1/12 text-red-500 hover:text-red-700 font-bold flex justify-center items-center" onclick="this.closest('.quote-item-row').remove(); calculateTotal('quote')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <button type="button" onclick="addQuoteItemRow()" class="w-full bg-indigo-100 text-indigo-700 hover:bg-indigo-200 font-bold py-2 rounded-lg transition duration-150 mb-4"><i class="fas fa-plus mr-2"></i>Add Item/Labor Estimate</button>

                            <div class="pt-4 border-t mt-4 flex justify-between items-center">
                                <span class="text-xl font-bold text-gray-700">TOTAL ESTIMATE:</span>
                                <span id="quote-total-display" class="text-2xl font-extrabold text-indigo-600">$0.00</span>
                            </div>

                            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition duration-150"><i class="fas fa-file-export mr-2"></i>Generate & Share Quote</button>
                        </form>
                    </div> 
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-semibold mb-4 text-indigo-700 border-b pb-2">Past Repair Quotes</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quote No.</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Client / Plate</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount ($)</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="quotes-table-body" class="bg-white divide-y divide-gray-200">
                                    </tbody>
                            </table>
                        </div>
                    </div>
                    </div>
            </div>

        </main>
    </div>

    <script src="management.js"></script>
    
    <script>
        // Global functions for dynamic rows
        function addInvoiceItemRow() {
            const container = document.getElementById('invoice-items-container');
            const newRow = document.createElement('div');
            // Class 'mb-2' provides vertical spacing between rows
            newRow.className = 'flex space-x-2 item-row mb-2'; 
            newRow.innerHTML = `
                <input type="text" placeholder="Description" 
                       class="p-2 border rounded-lg w-5/12 item-desc" required/>
                
                <input type="number" value="1" min="1" placeholder="Qty" 
                       class="p-2 border rounded-lg w-2/12 item-quantity text-center" 
                       oninput="calculateTotal('invoice')" required/>
                
                <input type="number" placeholder="Price ($)" 
                       class="p-2 border rounded-lg w-4/12 item-amount text-right" 
                       step="0.01" min="0" oninput="calculateTotal('invoice')" required/>
                
                <button type="button" 
                        class="w-1/12 text-red-500 hover:text-red-700 font-bold flex justify-center items-center" 
                        onclick="this.closest('.item-row').remove(); calculateTotal('invoice')">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            container.appendChild(newRow);
            // attachAmountListeners call removed to prevent ReferenceError
        }

        function addQuoteItemRow() {
            const container = document.getElementById('quote-items-container');
            const newRow = document.createElement('div');
            newRow.className = 'flex space-x-2 quote-item-row mb-2';
            newRow.innerHTML = `
                <input type="text" placeholder="Description" 
                       class="p-2 border rounded-lg w-5/12 quote-item-desc" required/>
                
                <input type="number" value="1" min="1" placeholder="Qty" 
                       class="p-2 border rounded-lg w-2/12 quote-item-quantity text-center" 
                       oninput="calculateTotal('quote')" required/>
                       
                <input type="number" placeholder="Cost ($)" 
                       class="p-2 border rounded-lg w-4/12 quote-item-amount text-right" 
                       step="0.01" min="0" oninput="calculateTotal('quote')" required/>
                       
                <button type="button" 
                        class="w-1/12 text-red-500 hover:text-red-700 font-bold flex justify-center items-center" 
                        onclick="this.closest('.quote-item-row').remove(); calculateTotal('quote')">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            container.appendChild(newRow);
            // attachAmountListeners call removed to prevent ReferenceError
        }
    </script>
</body>
</html>
